\NeedsTeXFormat{LaTeX2e}[1994/06/01]
\ProvidesPackage{mypackage}[2019/01/11 v0.01 My LaTeX thesis package ]

%% Van de Graaf Canon
%% 2:3:4:6 ratio (inner:top:outer:bottom)
%% inner 	= (page width - binding offset) / 9
%% top		= 1.5 * inner
%% outer		= 2 * inner:re 
%% bottom	= 3 * inner --> modified to --> bottom == top
\usepackage[
	%showframe,
	twoside,
	inner=23mm,
	top=34.5mm,
	outer=46mm,
	%bottom=69mm,
	bottom=34.5mm,
	bindingoffset=3mm,
	headsep=\baselineskip,
	%%includehead,
	%%includefoot
]{geometry}

% baliky (vsechno mozny)
\RequirePackage{graphicx}
\RequirePackage[english]{babel}
\RequirePackage[utf8]{inputenc}
% \RequirePackage[IL2]{fontenc} %fonty vyladene pro cestinu/slovenstinu
\RequirePackage[OT1]{fontenc} % default je Computer Modern
\RequirePackage{amsmath}
\RequirePackage{amssymb}
\RequirePackage{amsthm}
\RequirePackage{tabularx}

\usepackage{hyperref}
\hypersetup{colorlinks=true,allcolors=black}
\usepackage{hypcap}
\usepackage{afterpage}
\usepackage{setspace}
\usepackage{zref-totpages}
\usepackage{lastpage}

\usepackage{cool}
\Style{DSymb={\mathrm d},DShorten=true,IntegrateDifferentialDSymb=\mathrm{d}}
\usepackage{float}
\usepackage{tabularx}
\usepackage{makecell}
\usepackage{arydshln}

\usepackage{xcolor}
\colorlet{RED}{black}
\colorlet{BLUE}{black}

\usepackage[font=small,labelfont=bf]{caption}

\@ifpackageloaded{fancyhdr}{}{\RequirePackage{fancyhdr}}
%\@ifpackageloaded{biblatex}{}{\RequirePackage{biblatex}}
\@ifpackageloaded{titlesec}{}{\RequirePackage{titlesec}}
\@ifpackageloaded{lipsum}{}{\RequirePackage{lipsum}}
\@ifpackageloaded{pdfpages}{}{\RequirePackage{pdfpages}} % kvuli moznosti vlozit externi pdf (napr. zadani prace)

% univerzita
\newcommand*{\university}[1]{\gdef\@university{#1}}
\newcommand*{\@university}{Masaryk university}
\newcommand*{\univerzita}[1]{\gdef\@univerzita{#1}}
\newcommand*{\@univerzita}{Masarykova univerzita}

% fakulta
\newcommand*{\faculty}[1]{\gdef\@faculty{#1}}
\newcommand*{\@faculty}{Faculty of science}
\newcommand*{\fakulta}[1]{\gdef\@fakulta{#1}}
\newcommand*{\@fakulta}{Přírodovědecká fakulta}

% ústav
\newcommand*{\department}[1]{\gdef\@department{#1}}
\newcommand*{\@department}{Department of theoretical physics and astrophysics}
\newcommand*{\ustav}[1]{\gdef\@ustav{#1}}
\newcommand*{\@ustav}{Ústav teoretické fyziky a astrofyziky}

% název práce (jednotný / hlavní)
\newcommand*{\thesisType}[1]{\gdef\@thesisType{#1}}
\newcommand*{\@thesisType}{Ph.D. Dissertation}

% název práce (jednotný / hlavní)
\newcommand*{\thesisTitle}[1]{\gdef\@thesisTitle{#1}}
\newcommand*{\@thesisTitle}{Zadejte název práce}

% název práce en
\newcommand*{\thesisTitleEN}[1]{\gdef\@thesisTitleEN{#1}}
\newcommand*{\@thesisTitleEN}{Zadejte název práce}

% název práce cz
\newcommand*{\thesisTitleCZ}[1]{\gdef\@thesisTitleCZ{#1}}
\newcommand*{\@thesisTitleCZ}{Zadejte název práce}

% vedoucí práce
\newcommand*{\supervisor}[1]{\gdef\@supervisor{#1}}
\newcommand*{\@supervisor}{Zadejte vedoucího práce}

% konzultant
\newcommand*{\authorFull}[1]{\gdef\@authorFull{#1}}
\newcommand*{\@authroFull}{Jméno autora s tituly}


% konzultant
\newcommand*{\consultant}[1]{\gdef\@consultant{#1}}
\newcommand*{\@consultant}{Zadejte konzultanta}

% akademický rok
\newcommand*{\academicYear}[1]{\gdef\@academicYear{#1}}
\newcommand*{\@academicYear}{1900/1901}

% rok vydani / psani (na titulce)
\newcommand*{\yearOfMaking}[1]{\gdef\@yearOfMaking{#1}}
\newcommand*{\@yearOfMaking}{1900}

% mesto
\newcommand*{\city}[1]{\gdef\@city{#1}}
\newcommand*{\@city}{Brno}

% cover image
\newcommand*{\coverImage}[1]{\gdef\@coverImage{#1}}
\newcommand*{\@coverImage}{Brno}

% --------------
% Titulní strana
% --------------
\renewcommand*{\maketitle}{%
\begin{titlepage}
    \newgeometry{outer=20mm,bottom=20mm,top=20mm}

    \noindent \includegraphics[width=10cm]{logo/muni-lg-eng-black.png}

    \Large
    \noindent \MakeUppercase{\@faculty}

    \vspace{0.25cm}

    \scriptsize
    \noindent \MakeUppercase{\@department}

    \par\noindent\rule{\textwidth}{0.5pt}

    \vspace{1cm}
        
    \begin{center}
    \includegraphics[height=8cm]{\@coverImage}
    \end{center}

    \vspace{1cm}

    \Large
    \noindent \@thesisType
    \vspace{0.5cm}

    \Huge
    \noindent \textbf{\@thesisTitle}
    \normalsize

    \vfill

    \Large
    \noindent
    \begin{tabular}{rl}
     	Author: & \textbf{\@authorFull} \\
        Supervisor: & \textbf{\@supervisor} \\
        Consultant: & \textbf{\@consultant} \\
    \end{tabular}

    \vfill

    \noindent \@city\ \@yearOfMaking
    
    \restoregeometry    
\end{titlepage}
}

% --
% Prázdná strana
% --
\newcommand{\blankpage}{%
    \newpage
    \thispagestyle{plain}
    \mbox{}
    \newpage
}

% --
% Bibliografické info (EN+CZ)
% --
\newcommand{\bibinfoen}{%
    %\addcontentsline{toc}{chapter}{BIBLIOGRAPHIC ENTRY}
    \noindent \Large \textbf{BIBLIOGRAPHIC ENTRY}
    \normalsize

    \vspace{1.25cm}

    \noindent
    \begin{tabular}{ll}
        \textbf{Author} & \@authorFull \\
        \ & \@department \\
        \ & \@faculty, \@university \\
        \ & \\
        \textbf{Dissertation Title} &  Analysis and modeling of nonlinear \\
        \ & dynamical systems in asrophysics \\
        \ & \\
        \textbf{Degree Programme} & Physics \\
        \ & \\
        \textbf{Field of Study} & Astrophysics \\
        \ & \\
        \textbf{Supervisor} & \@supervisor \\
        \ & \@department \\
        \ & \@faculty, \@university \\
        \ & \\
        \textbf{Consultant} & \@consultant \\
        \ & \@department \\
        \ & \@faculty, \@university \\
        \ & \\
        \textbf{Academic Year} & \@academicYear \\
        \ & \\
        \textbf{Number of Pages} & 20 + \pageref{LastPage} \\
        \ & \\
        \textbf{Keywords} & accretion disk, chaos, cataclysmic variables, \\
        \ & dripping faucet, flickering \\
        \ & \\
    \end{tabular}
    
    \blankpage

    \newpage
}


\newcommand{\bibinfocz}{%
	%\addcontentsline{toc}{chapter}{BIBLIOGRAFICKÝ ZÁZNAM}
    % CZ
    \noindent \Large \textbf{BIBLIOGRAFICKÝ ZÁZNAM}
    \normalsize

    \vspace{1.25cm}

    \noindent
    \begin{tabular}{ll}
        \textbf{Autor} & \@authorFull \\
        \ & \@department \\
        \ & \@faculty, \@university \\
        \ & \\
        \textbf{Název práce} & Analýza a modelování nelineárních \\
        \ & dynamických systémů v astrofyzice \\
        \ & \\
        \textbf{Studijní program} & Fyzika \\
        \ & \\
        \textbf{Studijní obor} & Astrofyzika \\
        \ & \\
        \textbf{Vedoucí práce} & \@supervisor \\
        \ & \@ustav \\
        \ & \@fakulta, \@univerzita \\
        \ & \\
        \textbf{Konzultant} & \@consultant \\
        \ & \@ustav \\
        \ & \@fakulta, \@univerzita \\
        \ & \\
        \textbf{Akademický rok} & \@academicYear \\
        \ & \\
        \textbf{Počet stran} & 20 + \pageref{LastPage} \\
        \ & \\
        \textbf{Klíčová slova} & akreční disk, chaos, kataklyzmické proměnné, \\
        \ & kapající kohoutek, flickering \\
        \ & \\
     \end{tabular}
     
     \blankpage

    \newpage
}

% ---
% Vložení krátké kapitoly
% - použitelné na poděkování, akstrakt atd.
% ---
\newcommand{\shortchapter}[2]{%
    \noindent \Large \textbf{\MakeUppercase{#1}}
    \normalsize
    \vspace{1.25cm}\\
    \input{#2}
    \newpage
}

% ---
% Prohlášení s podpisem a datumem
% ---
\newcommand{\declaration}[1]{%
    \noindent \Large \textbf{DECLARATION}
    \normalsize
    \vspace{1.25cm}\\
	\input{#1}
    \vspace{2.5cm}
    \par\noindent\makebox[5cm]{\hrulefill} \hfill\makebox[5cm]{\hrulefill}%
    \par\noindent\makebox[5cm][l]{\@author} \hfill\makebox[5cm][l]{Date}%    
    \newpage
}

% Změna stylu hlavního nadpisu kapitoly
% - vyhodí zbytečné "Chapter / Kapitola"
% - nadpis velkymi pismeny + nastaveni spacingu
\titleformat{\chapter}{\normalfont \LARGE \bfseries}{\thechapter}{20pt}{\MakeUppercase}[]
\titlespacing*{\chapter}{0pt}{50pt}{10mm}

% Změna stylu hlavního nadpisu sekce
% - velikost pisma + nastaveni spacingu
\titlespacing*{\section}{0pt}{1cm}{.25cm}
\titleformat{\section}{\normalfont \Large \bfseries}{\thesection}{20pt}{}[]

% Změna stylu hlavního nadpisu sub sekce
% - velikost pisma + nastaveni spacingu
\titlespacing*{\subsection}{0pt}{1cm}{.25cm}
\titleformat{\subsection}{\normalfont \bfseries}{\thesubsection}{20pt}{}[]

% Styl hlavicky stranek (krome kazde 'titulni strany' kapitoly)
\pagestyle{fancy}
\fancypagestyle{mystyle}{
    \fancyhf{}
    \fancyhead[LE,RO]{\thepage}
    \fancyhead[LO]{\leftmark}
    \fancyhead[RE]{\leftmark}
    \renewcommand{\chaptermark}[1]{\markboth{\thechapter. \MakeUppercase{##1}}{}}
}

%\fancypagestyle{style3}{
%    \fancyhf{}
%    \setlength{\headwidth}{\textwidth}
%    \addtolength{\headwidth}{\marginparwidth}
%    \addtolength{\headwidth}{\marginparsep}
%    \fancyhead[LE,RO]{\bfseries\thepage}
%    \renewcommand{\headrulewidth}{0pt} %<- ADDED
%    \renewcommand{\footrulewidth}{0pt} %<- ADDED
%}

\newcommand*\diff{\mathop{}\!\mathrm{d}}
\newcommand*\Diff[1]{\mathop{}\!\mathrm{d^#1}}

%% Copyright page
\newcommand{\copypage}{%
	\newgeometry{inner=30mm,outer=30mm,bottom=50mm,top=30mm,bindingoffset=3mm}
	\mbox{}
	\vfill
	\begin{center}
	\textcopyright\ \@author, \@university, \@yearOfMaking\\
	\end{center}
	\restoregeometry
    \newpage
}

%% Content page(s)
\newcommand{\content}{%
	\frontmatter
    \pagenumbering{gobble}
    \tableofcontents
    \mainmatter
}

%% Motivational quote
\newcommand{\mquote}[2]{%
	\begin{footnotesize}
	\begin{center}
			\textit{``#1''}\\
			--- #2 ---
	\end{center}
	\end{footnotesize}
	
	\vspace{5mm}
}

\newcommand{\addstretchshrink}[1]{%
  \if\relax\displayskipstretch\relax
    % there is no factor, don't add plus and minus
  \else
    plus \displayskipstretch\gluestretch#1
    minus \displayskipstretch\glueshrink#1
  \fi
}
\def\fix#1\abovedisplayskip#2\displayskipstretch\belowdisplayshortskip#3\fix{%
  \everydisplay{#1#3
    \abovedisplayskip = \displayskipstretch\abovedisplayskip \addstretchshrink\abovedisplayskip
    \belowdisplayskip = \displayskipstretch\belowdisplayskip \addstretchshrink\belowdisplayskip
    \abovedisplayshortskip = \displayskipstretch\abovedisplayshortskip \addstretchshrink\abovedisplayshortskip
    \belowdisplayshortskip = \displayskipstretch\belowdisplayshortskip \addstretchshrink\belowdisplayshortskip
  }%
}
\expandafter\fix\the\everydisplay\fix

\flushbottom

\endinput
